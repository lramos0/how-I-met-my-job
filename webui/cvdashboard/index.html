
   <!DOCTYPE html>
   <html lang="en">
   <head>
     <meta charset="UTF-8">
     <title>üìÑ Resume Parser Dashboard</title>
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <!-- Bootstrap -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
     <!-- Custom styles (optional) -->
     <link rel="stylesheet" href="style.css">
   </head>
   
   <body class="bg-light">
     <div class="container py-5">
       <h2 class="text-center fw-bold mb-4">üìÑ Resume Parser Dashboard (TEST)</h2>
   
       <!-- Upload Section -->
       <div class="card p-4 shadow-sm mb-4">
         <h5 class="fw-bold mb-3">Upload Your Resume</h5>
         <input type="file" id="resumeFile" class="form-control mb-3" accept=".pdf,.docx">
         <button class="btn btn-primary w-100" onclick="parseResume()">üöÄ Parse Resume</button>
         <p id="statusMsg" class="mt-3 text-muted"></p>
       </div>
   
       <!-- Preview Section -->
       <div id="previewSection" class="card p-4 shadow-sm d-none">
         <h5 class="fw-bold mb-3">üßæ Resume Preview</h5>
   
         <div id="parsedOutput" class="bg-light p-3 border rounded small"></div>
   
         <div class="text-end mt-4">
           <button class="btn btn-success me-2" onclick="downloadJSON()">üíæ Download JSON</button>
           <button class="btn btn-primary" onclick="goToJobsPage()">‚û°Ô∏è Continue to Job Matching</button>
         </div>
       </div>
     </div>
   
     <script>
       // Flask endpoint
       const BACKEND_URL = "http://127.0.0.1:5001/parse-resume";
   
       // Holds latest parsed resume
       let resumeJSON = null;
   
       async function parseResume() {
         console.log("parseResume() called");
   
         const fileInput = document.getElementById("resumeFile");
         const status = document.getElementById("statusMsg");
   
         if (!fileInput || !fileInput.files.length) {
           alert("Please upload a resume file first.");
           return;
         }
   
         const file = fileInput.files[0];
         if (status) status.textContent = `Uploading and parsing ${file.name}‚Ä¶`;
   
         const formData = new FormData();
         formData.append("file", file);
   
         let parsed;
         try {
           const resp = await fetch(BACKEND_URL, {
             method: "POST",
             body: formData,
           });
   
           console.log("API status:", resp.status);
   
           if (!resp.ok) {
             throw new Error(`Parser error ${resp.status}`);
           }
   
           parsed = await resp.json();
           console.log("PARSED FROM BACKEND:", parsed);
         } catch (err) {
           console.error("Error parsing resume:", err);
           if (status) status.textContent = "‚ùå Failed to parse resume.";
           alert("There was an error parsing the resume. Check the backend logs.");
           return;
         }
   
         // Save parsed JSON
         resumeJSON = parsed;
   
         // Map fields into the preview
         const id = parsed.id ?? "‚Äî";
         const name = parsed.name ?? "‚Äî";
         const email = parsed.email ?? "‚Äî";
         const phone = parsed.phone ?? "‚Äî";
         const location = parsed.location ?? "‚Äî";
         const education = parsed.education ?? "‚Äî";
         const experience = parsed.years_experience ?? parsed.experience ?? "‚Äî";
         const skills = Array.isArray(parsed.skills) ? parsed.skills.join(", ") : "‚Äî";
         const certifications = Array.isArray(parsed.certifications) ? parsed.certifications.join(", ") : "‚Äî";
         const achievements = Array.isArray(parsed.achievements) ? parsed.achievements.join(", ") : "‚Äî";
   
         document.getElementById("parsedOutput").innerHTML = `
           <b>ID:</b> ${id}<br>
           <b>Name:</b> ${name}<br>
           <b>Email:</b> ${email}<br>
           <b>Phone:</b> ${phone}<br>
           <b>Location:</b> ${location}<br>
           <b>Education:</b> ${education}<br>
           <b>Experience:</b> ${experience}<br>
           <b>Skills:</b> ${skills}<br>
           <b>Certifications:</b> ${certifications}<br>
           <b>Achievements:</b> ${achievements}
         `;
   
         document.getElementById("previewSection").classList.remove("d-none");
         if (status) status.textContent = "‚úÖ Resume parsed successfully!";
       }
   
       function downloadJSON() {
         if (!resumeJSON) {
           alert("Please parse the resume first.");
           return;
         }
         const blob = new Blob([JSON.stringify(resumeJSON, null, 2)], {
           type: "application/json",
         });
         const url = URL.createObjectURL(blob);
         const a = document.createElement("a");
         a.href = url;
         a.download = "parsed_resume.json";
         document.body.appendChild(a);
         a.click();
         document.body.removeChild(a);
       }
   
       function goToJobsPage() {
         if (!resumeJSON) {
           alert("Parse resume before continuing.");
           return;
         }
         localStorage.setItem("parsedResume", JSON.stringify(resumeJSON));
         window.location.href = "jobs.html";
       }
     </script>
   </body>
   </html>